# makr

Python Tkinter 기반의 매크로 제작 및 실행 도구입니다. 조건과 행동 블럭을 조합해 원하는 자동화 시나리오를 구성하고, 이미지 인식을 활용한 분기나 마우스/키보드 동작을 수행할 수 있습니다.

## 주요 기능

- 조건/행동/반복 블럭을 트리 구조로 구성하는 매크로 편집기
- 이미지 인식, 대기, 반복 조건 등 다양한 조건 블럭 제공
- 마우스 좌표 클릭, 인식된 이미지 클릭, 키보드 입력 행동 지원
- JSON 파일로 매크로 저장 및 불러오기
- 실행 로그 확인 및 중지 기능

## 설치 및 실행

```bash
python -m venv .venv
source .venv/bin/activate  # Windows에서는 .venv\\Scripts\\activate
pip install -r requirements.txt
python -m makr.gui
```

> **주의:** 이미지 인식과 마우스/키보드 제어는 실제 GUI 환경에서만 동작합니다. 원격 또는 헤드리스 환경에서는 일부 기능이 제한될 수 있습니다.

## 매크로 편집 방법

1. 좌측 트리뷰에서 `조건 추가`, `행동 추가`, `반복 블럭` 버튼으로 블럭을 생성합니다.
   - 조건: `n`초 대기, 이미지 인식 대기 등
   - 행동: 마우스 좌표 클릭/이미지 클릭, 키보드 입력 등
   - 반복: 지정 횟수만큼 하위 블럭을 반복 실행
2. 조건은 만족해야 다음 블럭으로 진행됩니다. 예를 들어 이미지 조건을 추가하면 해당 이미지가 인식될 때까지 대기합니다.
3. 반복 블럭을 선택한 뒤 다른 블럭을 추가하면 반복 블럭의 하위 단계로 추가됩니다.
4. 우측 패널에서 선택한 블럭의 세부 설정을 확인하고, `선택 편집`으로 수정할 수 있습니다.
5. 상단 메뉴에서 매크로를 JSON 파일로 저장하거나 불러올 수 있습니다.

## 실행

우측 하단 `매크로 실행` 버튼을 눌러 현재 구성된 매크로를 실행합니다. 실행 중 `실행 중지` 버튼으로 중단할 수 있으며, 진행 상황은 로그 영역에서 확인할 수 있습니다.

## 주의 사항

- 이미지 인식을 사용하려면 비교 대상 이미지 파일을 준비해야 합니다. 가능한 한 캡처 화면과 동일한 해상도/스케일을 유지하세요.
- `confidence` 값을 설정하면 OpenCV가 필요합니다. `opencv-python` 패키지가 설치되어 있는지 확인하세요.
- 매크로 실행 중에는 사용자의 마우스/키보드 입력이 방해받을 수 있습니다. 필요한 경우 실행 전 충분한 안전 장치를 마련하세요.
